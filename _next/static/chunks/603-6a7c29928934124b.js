"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{6383:function(r,e,t){var n=t(7437),o=t(7648),a=t(9376),i=t(5122),l=t(8543),d=t(9083),u=t(1504),s=t(5666),c=t(658),m=t(7639),f=t(3105),p=t(9470),g=t(6873),h=t(1442),F=t(8900),x=t(7610),v=t(2113);e.Z=r=>{let{children:e}=r,t=(0,a.usePathname)(),y=(0,i.Z)(),b=(0,x.T)(),S=[{name:"Create",href:"/create",icon:p.Z},{name:"Preview",href:"/preview",icon:g.Z},{name:"My Forms",href:"/myforms",icon:h.Z}];return(0,n.jsxs)(l.Z,{sx:{minHeight:"100vh",bgcolor:"grey.50"},children:[(0,n.jsx)(d.Z,{position:"sticky",sx:{bgcolor:"white",color:"text.primary",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",backdropFilter:"blur(8px)"},children:(0,n.jsx)(u.Z,{maxWidth:"xl",children:(0,n.jsxs)(s.Z,{sx:{py:1},children:[(0,n.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",flexGrow:1},children:[(0,n.jsx)(F.Z,{sx:{fontSize:32,color:"primary.main",mr:1}}),(0,n.jsx)(c.Z,{variant:"h5",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #1976d2, #9c27b0)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Dynamic Form Builder"})]}),(0,n.jsx)(l.Z,{sx:{display:"flex",gap:1},children:S.map(r=>{let e=r.icon,a=t===r.href;return(0,n.jsx)(m.Z,{component:o.default,href:r.href,startIcon:(0,n.jsx)(e,{}),variant:a?"contained":"text",onClick:()=>{"/create"===r.href&&b((0,v.ou)())},sx:{color:a?"white":"text.primary",bgcolor:a?"primary.main":"transparent","&:hover":{bgcolor:a?"primary.dark":(0,f.Fq)(y.palette.primary.main,.1)}},children:r.name},r.name)})})]})})}),(0,n.jsx)(u.Z,{maxWidth:"xl",sx:{py:4},children:e})]})}},2113:function(r,e,t){t.d(e,{AK:function(){return u},B$:function(){return F},L4:function(){return d},Sn:function(){return f},Zv:function(){return h},b2:function(){return i},b9:function(){return x},dI:function(){return p},kh:function(){return c},ou:function(){return g},wI:function(){return m},xS:function(){return l}});var n=t(1455),o=t(3837);let a=(0,n.oM)({name:"formBuilder",initialState:{currentForm:{name:"",fields:[]},formData:{},errors:[],savedForms:[]},reducers:{setFormName:(r,e)=>{r.currentForm.name=e.payload},addField:(r,e)=>{let t={...e.payload,id:(0,o.Z)(),order:r.currentForm.fields.length};r.currentForm.fields.push(t)},updateField:(r,e)=>{let t=r.currentForm.fields.findIndex(r=>r.id===e.payload.id);-1!==t&&(r.currentForm.fields[t]=e.payload)},deleteField:(r,e)=>{r.currentForm.fields=r.currentForm.fields.filter(r=>r.id!==e.payload),r.currentForm.fields.forEach((r,e)=>{r.order=e})},reorderFields:(r,e)=>{r.currentForm.fields=e.payload.map((r,e)=>({...r,order:e}))},saveForm:r=>{try{let e=JSON.parse(localStorage.getItem("formSchemas")||"[]");if(r.currentForm.id){let t=e.findIndex(e=>e.id===r.currentForm.id);if(-1!==t){let n={...e[t],name:r.currentForm.name,fields:[...r.currentForm.fields],updatedAt:new Date().toISOString()};e[t]=n;let o=r.savedForms.findIndex(e=>e.id===r.currentForm.id);-1!==o&&(r.savedForms[o]=n)}}else{let t={id:(0,o.Z)(),name:r.currentForm.name,createdAt:new Date().toISOString(),fields:[...r.currentForm.fields]};e.push(t),r.savedForms.push(t),r.currentForm={name:"",fields:[]},r.formData={},r.errors=[]}localStorage.setItem("formSchemas",JSON.stringify(e))}catch(r){console.error("Error saving to localStorage:",r)}},loadSavedForms:r=>{try{let e=JSON.parse(localStorage.getItem("formSchemas")||"[]");r.savedForms=e}catch(e){console.error("Error loading from localStorage:",e),r.savedForms=[]}},loadForm:(r,e)=>{let t=r.savedForms.find(r=>r.id===e.payload);t&&(r.currentForm={id:t.id,name:t.name,fields:[...t.fields]})},deleteForm:(r,e)=>{try{r.savedForms=r.savedForms.filter(r=>r.id!==e.payload);let t=r.savedForms;localStorage.setItem("formSchemas",JSON.stringify(t)),r.currentForm.id===e.payload&&(r.currentForm={name:"",fields:[]},r.formData={},r.errors=[])}catch(r){console.error("Error deleting form:",r)}},clearForm:r=>{r.currentForm={name:"",fields:[]},r.formData={},r.errors=[]},updateFormData:(r,e)=>{r.formData[e.payload.fieldId]=e.payload.value},setErrors:(r,e)=>{r.errors=[...e.payload]},clearErrors:r=>{r.errors=[]}}}),{setFormName:i,addField:l,updateField:d,deleteField:u,reorderFields:s,saveForm:c,loadSavedForms:m,loadForm:f,deleteForm:p,clearForm:g,updateFormData:h,setErrors:F,clearErrors:x}=a.actions;e.ZP=a.reducer},7610:function(r,e,t){t.d(e,{C:function(){return a},T:function(){return o}});var n=t(8575);let o=()=>(0,n.I0)(),a=n.v9},6105:function(r,e,t){t.d(e,{E:function(){return n},P:function(){return a}});let n=(r,e,t)=>{var n;if(!(null===(n=r.derivedConfig)||void 0===n?void 0:n.isDerived))return e[r.id]||r.defaultValue;let{parentFields:a,formula:i}=r.derivedConfig;if(!i||""===i.trim())return r.defaultValue||"";try{let n={};a.forEach(r=>{let o=t.find(e=>e.id===r);if(o){let t=e[r]||o.defaultValue,a=o.label.replace(/[^a-zA-Z0-9]/g,"");a&&(n[a]=t)}}),n.Math=Math,n.Date=Date,n.parseInt=Number.parseInt,n.parseFloat=Number.parseFloat,n.Number=Number,n.String=String,n.Boolean=Boolean,n.calculateAge=r=>{if(!r)return 0;try{let e=new Date,t=new Date(r);if(isNaN(t.getTime()))return 0;let n=e.getFullYear()-t.getFullYear(),o=e.getMonth()-t.getMonth();return(o<0||0===o&&e.getDate()<t.getDate())&&n--,Math.max(0,n)}catch(r){return 0}},n.concat=function(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.filter(r=>null!=r).join("")},n.divide=(r,e)=>0===e?0:r/e;let l=o(i);if(!l)return console.warn("Invalid formula detected:",i),r.defaultValue||"";let d=Object.keys(n),u=Object.values(n),s=Function(...d,"\n      try {\n        return ".concat(l,';\n      } catch (error) {\n        console.error("Formula execution error:", error);\n        return "";\n      }\n    '))(...u);if(null==s)return r.defaultValue||"";return s}catch(e){return console.error("Error computing derived field:",e),console.error("Formula:",i),console.error("Context:",a),r.defaultValue||""}},o=r=>{if(!r||"string"!=typeof r)return null;for(let e of[/eval\s*\(/gi,/function\s*\(/gi,/constructor/gi,/prototype/gi,/__proto__/gi,/import\s+/gi,/require\s*\(/gi,/process\./gi,/global\./gi,/window\./gi,/document\./gi,/alert\s*\(/gi,/confirm\s*\(/gi,/prompt\s*\(/gi])if(e.test(r))return console.warn("Dangerous pattern detected in formula:",r),null;try{return Function("return ".concat(r)),r}catch(t){let e=r.trim();if(e.includes("+")&&!e.match(/^\d+\s*[+\-*/]/)||e.match(/^[a-zA-Z_][a-zA-Z0-9_]*\s*\(/)||e.match(/^[\w\s+\-*/$$$$.]+$/))return e;return console.warn("Could not sanitize formula:",r),null}},a=(r,e)=>{var t;let n=[];return r.isDerived&&(r.formula&&""!==r.formula.trim()||n.push("Formula is required for derived fields"),r.parentFields&&0!==r.parentFields.length||n.push("At least one parent field is required for derived fields"),null===(t=r.parentFields)||void 0===t||t.forEach(r=>{e.find(e=>e.id===r)||n.push("Parent field with ID ".concat(r," not found"))}),r.formula&&!o(r.formula)&&n.push("Formula contains invalid or dangerous syntax")),n}}}]);